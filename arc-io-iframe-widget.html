<!DOCTYPE html>
<html>
<head>
  <script async src="https://arc.io/widget.js#JnX5qiNK"></script>
</head>
<body>
  <!-- <iframe src="https://trianguloy.github.io/arc-io-iframe-widget"></iframe> -->
  <script> 
    function callback(mutationsList) {
      mutationsList.forEach(mutation => {
          if (mutation.attributeName === 'class') {
              if(mutation.target.classList.contains('is-open')){
                console.log("enter")
                parent.postMessage("enter",'*');
              }else{
                console.log("leave")
                parent.postMessage("leave",'*');
              }
          }
      })
    }

    mutationObserver = new MutationObserver(callback)
    
    var retry = 10;
    var checkExist = setInterval(function() {
      var frame = document.getElementById('arc-widget-launcher-iframe')
       if (frame != null) {
          mutationObserver.observe(
              frame,
              { attributes: true }
          )
       }else{
         retry--;
         if(retry != 0) return;
       }
      console.log("cancel")
       clearInterval(checkExist);
    }, 1000);
  </script>
</body>
</html> 
